# ~~ Generated by projen. To modify, edit .projenrc.ts and run "npx projen".

name: git-tags
run-name: Update git version aliases
on:
  push:
    tags:
      - v[0-9]+.[0-9]+.[0-9]+
jobs:
  tag:
    runs-on: ubuntu-latest
    permissions:
      contents: write
    steps:
      - name: git checkout
        uses: actions/checkout@c85c95e3d7251135ab7dc9ce3241c5835cc595a9
        with:
          fetch-depth: 0
      - id: get_aliases
        uses: pr-mpt/actions-semver-aliases@01b2241f545f14efe72edaa2fcec49705dbe910d
        with:
          version: ${{ github.ref_name }}
      - name: Delete tags if they are already in use
        run: for t in ${{ steps.get_aliases.outputs.list }}; git push origin :refs/tags/$t; done
        continue-on-error: true
      - name: Create the new tags
        run: for t in ${{ steps.get_aliases.outputs.list }}; git tag $t ${{ github.sha }}; done
      - name: Push tags
        run: git push origin --tags
